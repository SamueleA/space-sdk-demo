[{"/home/piraya/repos/space-sdk-demo/src/index.js":"1","/home/piraya/repos/space-sdk-demo/src/reportWebVitals.js":"2","/home/piraya/repos/space-sdk-demo/src/App.js":"3","/home/piraya/repos/space-sdk-demo/src/views/index.js":"4","/home/piraya/repos/space-sdk-demo/src/views/Album/index.js":"5","/home/piraya/repos/space-sdk-demo/src/views/Signin/index.js":"6","/home/piraya/repos/space-sdk-demo/src/views/Signup/index.js":"7","/home/piraya/repos/space-sdk-demo/src/shared/components/AuthForm/index.js":"8","/home/piraya/repos/space-sdk-demo/src/config.js":"9","/home/piraya/repos/space-sdk-demo/src/clients/index.js":"10","/home/piraya/repos/space-sdk-demo/src/clients/sdk.js":"11","/home/piraya/repos/space-sdk-demo/src/views/Album/components/Photo/index.js":"12","/home/piraya/repos/space-sdk-demo/src/shared/utils/typed-array-to-url.js":"13","/home/piraya/repos/space-sdk-demo/src/views/Album/components/Photo/styles.js":"14","/home/piraya/repos/space-sdk-demo/src/views/Album/styles.js":"15","/home/piraya/repos/space-sdk-demo/src/shared/components/AuthForm/styles.js":"16","/home/piraya/repos/space-sdk-demo/src/views/Signin/styles.js":"17","/home/piraya/repos/space-sdk-demo/src/views/Signup/styles.js":"18","/home/piraya/repos/space-sdk-demo/src/views/Album/components/InitScreen/index.js":"19","/home/piraya/repos/space-sdk-demo/src/views/Album/components/InitScreen/styles.js":"20","/home/piraya/repos/space-sdk-demo/src/clients/api/index.js":"21","/home/piraya/repos/space-sdk-demo/src/clients/api/client.js":"22","/home/piraya/repos/space-sdk-demo/src/clients/api/endpoints/identities.js":"23","/home/piraya/repos/space-sdk-demo/src/clients/api/endpoints/identity.js":"24","/home/piraya/repos/space-sdk-demo/src/shared/constants.js":"25"},{"size":500,"mtime":1611954757317,"results":"26","hashOfConfig":"27"},{"size":362,"mtime":1611954757317,"results":"28","hashOfConfig":"27"},{"size":471,"mtime":1612293925189,"results":"29","hashOfConfig":"27"},{"size":135,"mtime":1612063863905,"results":"30","hashOfConfig":"27"},{"size":3514,"mtime":1612303516432,"results":"31","hashOfConfig":"27"},{"size":1649,"mtime":1612367147970,"results":"32","hashOfConfig":"27"},{"size":2157,"mtime":1612367149610,"results":"33","hashOfConfig":"27"},{"size":2014,"mtime":1612226996801,"results":"34","hashOfConfig":"27"},{"size":422,"mtime":1612203979605,"results":"35","hashOfConfig":"27"},{"size":86,"mtime":1612322496627,"results":"36","hashOfConfig":"27"},{"size":1751,"mtime":1612365334383,"results":"37","hashOfConfig":"27"},{"size":1489,"mtime":1612366166344,"results":"38","hashOfConfig":"27"},{"size":96,"mtime":1612214565755,"results":"39","hashOfConfig":"27"},{"size":588,"mtime":1612366294233,"results":"40","hashOfConfig":"27"},{"size":1188,"mtime":1612297563234,"results":"41","hashOfConfig":"27"},{"size":283,"mtime":1612227039566,"results":"42","hashOfConfig":"27"},{"size":335,"mtime":1612226545035,"results":"43","hashOfConfig":"27"},{"size":337,"mtime":1612226557555,"results":"44","hashOfConfig":"27"},{"size":400,"mtime":1612228617754,"results":"45","hashOfConfig":"27"},{"size":436,"mtime":1612228900826,"results":"46","hashOfConfig":"27"},{"size":292,"mtime":1612322496627,"results":"47","hashOfConfig":"27"},{"size":1378,"mtime":1612322496627,"results":"48","hashOfConfig":"27"},{"size":1398,"mtime":1612322496627,"results":"49","hashOfConfig":"27"},{"size":3337,"mtime":1612322496627,"results":"50","hashOfConfig":"27"},{"size":85,"mtime":1612367104898,"results":"51","hashOfConfig":"27"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},"1vy17qz",{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"54"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"54"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"54"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"54"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/piraya/repos/space-sdk-demo/src/index.js",[],["106","107"],"/home/piraya/repos/space-sdk-demo/src/reportWebVitals.js",[],"/home/piraya/repos/space-sdk-demo/src/App.js",[],"/home/piraya/repos/space-sdk-demo/src/views/index.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Album/index.js",["108","109","110"],"import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { sdk } from '@clients';\nimport logo from '@assets/logo.svg';\nimport button from '@assets/button.svg';\nimport classnames from 'classnames';\n\nimport InitScreen from './components/InitScreen';\nimport Photo from './components/Photo';\nimport useStyles from './styles';\nimport { Typography } from '@material-ui/core';\n\nconst Album = () => {\n  const [init, setInit] = useState(true);\n  const history = useHistory();\n  const [photos, setPhotos] = useState([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const classes = useStyles();\n\n  const getPhotos = async () => {\n    setInit(true);\n    const storage = await sdk.getStorage();\n    const { items = [] } = await storage.listDirectory({\n      path: '/',\n      bucket: 'personal',\n      recursive: false,\n    });\n    setPhotos(items);\n    setInit(false);\n  };\n\n\n  useEffect(() => {\n    const user = localStorage.getItem('user');\n\n    if (!user) {\n      history.push('/signup');\n      return;\n    }\n    getPhotos();\n  }, []);\n\n  const addItemsToStorage = async ({\n    sourcePaths,\n    targetPath,\n  }) => {\n    setIsUploading(true);\n    const storage = await sdk.getStorage();\n    window.onbeforeunload = () => false;\n\n    const uploadResponse = await storage.addItems({\n      bucket: 'personal',\n      files: sourcePaths.map(({ data, path, mimeType }) => ({\n        data,\n        path,\n        mimeType,\n      })),\n    });\n\n    uploadResponse.once('done', async () => {\n      window.onbeforeunload = null;\n      const { items } = await storage.listDirectory({\n        path: '/',\n        bucket: 'personal',\n        recursive: false,\n      });\n      \n      setPhotos(items);\n\n      setIsUploading(false);\n    });\n  };\n\n  const addPhoto = async () => {\n    const fileInput = document.createElement('input');\n    fileInput.setAttribute('multiple', '');\n\n    fileInput.addEventListener('change', (event) => {\n      const sourcePaths = Array.from(event.target.files).map((file) => ({\n        name: file.name,\n        size: file.size,\n        data: file,\n        mimeType: file.type,\n        path: file.webkitRelativePath || file.name,\n      }));\n\n      addItemsToStorage({\n        sourcePaths,\n        targetPath: '/',\n      });\n    });\n\n    fileInput.type = 'file';\n    fileInput.click();\n  };\n\n  if (init) {\n    return (\n      <div className={classes.initContainer}>\n        <InitScreen />\n      </div>\n    );\n  }\n\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.headerContainer}>\n        <img src={logo} className={classes.logo} />\n        <ButtonBase\n          className={classes.addButton}\n          onClick={addPhoto}\n          disabled={isUploading}\n        >\n          <img\n            className={classnames(classes.addButtonImg, {\n              [classes.addButtonImgDisabled]: isUploading,\n            })}\n            src={button}\n          />\n        </ButtonBase>\n        <div className={classes.uploadInProgressContainer}>\n          {isUploading && (\n            <Typography className={classes.uploadInProgress}>\n              Upload in progress...\n            </Typography>\n          )}\n        </div>\n      </div>\n      <div className={classes.photosContainer}>\n        {photos.map((photo) => (\n          <Photo\n            key={photo.name}\n            name={photo.name}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Album;\n","/home/piraya/repos/space-sdk-demo/src/views/Signin/index.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Signup/index.js",[],"/home/piraya/repos/space-sdk-demo/src/shared/components/AuthForm/index.js",[],"/home/piraya/repos/space-sdk-demo/src/config.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/index.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/sdk.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Album/components/Photo/index.js",["111","112"],"import React, { useState, useEffect } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { sdk } from '@clients';\nimport typedArrayToUrl from '@utils/typed-array-to-url';\nimport photoLoading from '@assets/photo-loading.svg';\nimport classnames from 'classnames';\n\nimport useStyles from './styles';\n\nconst Photo = ({\n  name,\n}) => {\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(null);\n  const classes = useStyles();\n\n  const getPhotoUrl = async () => {\n    setLoading(true);\n    try {\n      const storage = await sdk.getStorage();\n\n      const response = await storage.openFile({\n        bucket: 'personal',\n        path: `/${name}`\n      });\n      const fileBytes = await response.consumeStream();\n      const fileUrl = typedArrayToUrl([fileBytes.buffer], response.mimeType);\n      \n      setUrl(fileUrl);\n    } catch(e) {\n      console.error('Failed to fetch url', e);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    getPhotoUrl();\n  }, []);\n\n  return (\n    <div className={classes.container}>\n      <Typography className={classes.title}>{name}</Typography>\n      <div\n        className={classnames(\n          classes.imageContainer, { [classes.background]: !loading }\n        )}\n      >\n        {loading ? (\n          <img src={photoLoading} className={classes.photo} />\n        ) : (\n          <img src={url} alt={name} className={classes.photo} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Photo;\n","/home/piraya/repos/space-sdk-demo/src/shared/utils/typed-array-to-url.js",["113"],"export default (buffer, mimeType) => URL.createObjectURL(new Blob(buffer, { type: mimeType }));\n","/home/piraya/repos/space-sdk-demo/src/views/Album/components/Photo/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Album/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/shared/components/AuthForm/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Signin/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Signup/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Album/components/InitScreen/index.js",[],"/home/piraya/repos/space-sdk-demo/src/views/Album/components/InitScreen/styles.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/api/index.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/api/client.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/api/endpoints/identities.js",[],"/home/piraya/repos/space-sdk-demo/src/clients/api/endpoints/identity.js",[],"/home/piraya/repos/space-sdk-demo/src/shared/constants.js",[],{"ruleId":"114","replacedBy":"115"},{"ruleId":"116","replacedBy":"117"},{"ruleId":"118","severity":1,"message":"119","line":42,"column":6,"nodeType":"120","endLine":42,"endColumn":8,"suggestions":"121"},{"ruleId":"122","severity":1,"message":"123","line":110,"column":9,"nodeType":"124","endLine":110,"endColumn":52},{"ruleId":"122","severity":1,"message":"123","line":116,"column":11,"nodeType":"124","endLine":121,"endColumn":13},{"ruleId":"118","severity":1,"message":"125","line":38,"column":6,"nodeType":"120","endLine":38,"endColumn":8,"suggestions":"126"},{"ruleId":"122","severity":1,"message":"123","line":49,"column":11,"nodeType":"124","endLine":49,"endColumn":63},{"ruleId":"127","severity":1,"message":"128","line":1,"column":1,"nodeType":"129","endLine":1,"endColumn":96},"no-native-reassign",["130"],"no-negated-in-lhs",["131"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["132"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","React Hook useEffect has a missing dependency: 'getPhotoUrl'. Either include it or remove the dependency array.",["133"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation",{"desc":"134","fix":"135"},{"desc":"136","fix":"137"},"Update the dependencies array to be: [history]",{"range":"138","text":"139"},"Update the dependencies array to be: [getPhotoUrl]",{"range":"140","text":"141"},[1140,1142],"[history]",[1009,1011],"[getPhotoUrl]"]